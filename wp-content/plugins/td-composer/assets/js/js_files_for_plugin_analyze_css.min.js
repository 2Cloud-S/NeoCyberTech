var tdAnalyzeCssMain;
(function(g,D,q){function x(a,c,b,e){var h=!1;try{b.cssRules}catch(u){return h}if("google-fonts-style-css"!==c&&"admin-bar-css"!==c&&"cssRules"in b&&"CSSRuleList"===b.cssRules.constructor.name)for(var l in b.cssRules)if(b.cssRules.hasOwnProperty(l))if("CSSStyleRule"===b.cssRules[l].constructor.name){var d=b.cssRules[l].cssText.trimChar(" ");if(d.length)if(0<d.indexOf(":not"))h='<div><div class="tda-style tda-result-line-found">'+d+"</div></div>",e.append(h),h=!0;else if(0<d.indexOf(",")){if(d=d.split("{"),
2===d.length){var f=d[0];d=d[1].split("}");if(2===d.length){f=f.split(",");for(var n=0;n<f.length;n++){h=f[n].trimChar(" ");var p=d[0].trimChar(" ");p=p.replace(")) text;",")); -webkit-background-clip: text;");h='<div><div class="tda-style">'+h+"{"+p+"}</div></div>";e.append(h);h=!0}}}}else if(f=d,-1===["html { margin-top: 32px !important; }","* html body { margin-top: 32px !important; }","html { margin-top: 46px !important; }","* html body { margin-top: 46px !important; }"].indexOf(d)){if(null!==
    b.cssRules[l].parentStyleSheet.href){var k=b.cssRules[l].parentStyleSheet.href.split("/"),m="";k.length&&1<k.length?k.forEach(function(u,v){v<k.length-1&&(m+=u+"/")}):m=b.cssRules[l].parentStyleSheet.href;f=/background-image\s*:\s*url\(\s*"(.*)\s*"\)\s*;/mg;f=d.replace(f,'background-image: url("'+m+'$1");')}f=f.replace(")) text;",")); -webkit-background-clip: text;");h='<div><div class="tda-style">'+f+"</div></div>";e.append(h);h=!0}}else if("CSSFontFaceRule"===b.cssRules[l].constructor.name)d=b.cssRules[l].cssText,
    f=/url\("([^\)]+?\.(woff|eot|woff2|ttf|svg)[^"]*)"\s*\)/gm,null===b.cssRules[l].parentStyleSheet.href?(console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"),console.log(b),console.log(l),console.log(b.cssRules[l])):(k=b.cssRules[l].parentStyleSheet.href.split("/"),m="",k.length&&1<k.length?k.forEach(function(u,v){v<k.length-1&&(m+=u+"/")}):m=b.cssRules[l].parentStyleSheet.href,h='<div><div class="tda-font-face">'+d.replace(f,'url("'+m+'$1")')+"</div></div>",e.append(h),h=!0);else if("CSSMediaRule"===
    b.cssRules[l].constructor.name)d=g('<div class="tda-analyze-media-rule" data-media-rule="'+b.cssRules[l].conditionText+'"></div>'),x(a,c,b.cssRules[l],d)&&(e.append(d),h=!0);else if("CSSSupportsRule"===b.cssRules[l].constructor.name)d=g('<div class="tda-analyze-support-rule" data-supports-rule="'+b.cssRules[l].conditionText+'"></div>'),x(a,c,b.cssRules[l],d)&&(e.append(d),h=!0);else if("CSSImportRule"===b.cssRules[l].constructor.name)h=x(a,c,b.cssRules[l].styleSheet,e);else if("CSSKeyframesRule"===
    b.cssRules[l].constructor.name){h='<div><div class="tda-analyze-frames-rule tda-style" style="border: 1px solid brown" data-key="'+b.cssRules[l].cssText+'">'+b.cssRules[l].cssText.trimChar(" ")+"</div></div>";e.append(h);h=!0;for(var r in b.cssRules[l].cssRules)d=b.cssRules[l].cssRules[r],"CSSKeyframeRule"===d.constructor.name&&(d=g('<div class="tda-analyze-frame-rule" style="border: 1px solid brown" data-key="'+d.cssText+'">'+d.cssText.trimChar(" ")+"</div>"),e.append(d))}return h}function y(a,c){var b=
    "",e="",h=!1;c.each(function(){var l=g(this),d=l.parent().data("media-rule");"undefined"===typeof d&&(d=l.parent().parent().data("media-rule"));"undefined"===typeof d?h?(b+="}"+this.textContent,h=!1,e=""):b+=this.textContent:h?e===d?b+=this.textContent:(b+="}@media"+d+"{"+this.textContent,e=d):(b+="@media"+d+"{"+this.textContent,h=!0,e=d)});return b}function z(a){var c=a.find(".tda-result-label"),b=a.find(".tda-result-lines");a=b.find(".tda-result-line-found:not(.tda-result-line-selected-no), .tda-result-line-diff:not(.tda-result-line-selected-no), .tda-result-line-selected-yes").length;
    var e=b.find(".tda-result-line-found.tda-result-line-critical:not(.tda-result-line-selected-no), .tda-result-line-diff.tda-result-line-critical:not(.tda-result-line-selected-no), .tda-result-line-selected-yes").length,h=b.find(".tda-result-line-diff:not(.tda-result-line-selected-no, .tda-result-line-selected-yes )").length,l=b.find(".tda-result-line-selected-yes").length,d=b.find(".tda-result-line-selected-no").length;b=c.find(".tda-style-group-info");a='<span class="tda-info-result-line-found" title="Found rules from this CSS" data-value="'+
        a+'">'+a+'</span> : <span class="tda-info-result-line-critical" title="Critical Style from the Found rules" data-value="'+e+'">'+e+'</span> : <span class="tda-info-result-line-selected-yes" title="Rules manually included from this CSS" data-value="'+l+'">'+l+'</span> : <span class="tda-info-result-line-selected-no" title="Rules manually excluded from this CSS" data-value="'+d+'">'+d+'</span> : <span class="tda-info-result-line-diff" title="Supplementary CSS rules found by the automat/manual test" title="" data-value="'+
        h+'">'+h+"</span>";b.length?b.html(a):c.append('<span class="tda-style-group-info">'+a+"</span>");tdAnalyzeCssMain.setSafeToLeave(!1)}function t(a){var c=g("#tdw-css-analyze"),b=c.find(".tda-results"),e=b.find(".tda-style-group:not(.tda-style-group-disabled)"),h=c.find(".tda-results-current"),l=c.find(".tda-results-history-wrap"),d=c.find(".tda-results-history"),f="",n="",p="",k="";k=e.find(".tda-result-line-found:not(.tda-result-line-selected-no), .tda-result-line-diff:not(.tda-result-line-selected-no), .tda-result-line-selected-yes");
    var m=e.find(".tda-result-line-found.tda-result-line-critical:not(.tda-result-line-selected-no), .tda-result-line-diff.tda-result-line-critical:not(.tda-result-line-selected-no), .tda-result-line-selected-yes"),r=e.find(".tda-result-line-diff:not(.tda-result-line-selected-no, .tda-result-line-selected-yes )"),u=[];if(e.length)for(var v=0;v<e.length;v++){var E=g(e[v]).data("style-id");"undefined"!==typeof E&&u.push(E)}""!==h.data("current")&&(l.show(),d.prepend('<div class="tda-results-history-item">'+
        (d.find(".tda-results-history-item").length+1)+": "+h.data("current").toString()+"</div>"));h.data("current",k.length);h.html("Found CSS Rules: "+k.length);b.find(".tda-style-group").each(function(){z(g(this))});if("undefined"===typeof a||!0!==a){var A=c.find(".tda-save-essential-css");setTimeout(function(){A.addClass("loading")},100);setTimeout(function(){A.addClass("done")},1500);setTimeout(function(){A.removeClass("loading");A.removeClass("done")},3E3);k.length&&(f=y("essentialCss",k));m.length&&
    (n=y("criticalCss",m));r.length&&(p=y("diffCss",r));a=".tda-style";tdAnalyzeCssMain._fullAnalyzed&&(a=".tda-result-line-found:not(.tda-result-line-selected-no, .tda-result-line-critical), .tda-result-line-diff:not(.tda-result-line-selected-no, .tda-result-line-critical), .tda-result-line-selected-yes");k=y("restFull",e.find(a));g.ajax({type:"POST",url:tdAnalyzeCssMain.getRestEndPoint("tda/save_essential_css","uuid="+tdAnalyzeCssMain.getUniqueID()),beforeSend:function(C){C.setRequestHeader("X-WP-Nonce",
            window.tdaGlobal.wpRestNonce)},data:{post_id:window.tdaGlobal.postId,unique_id:tdAnalyzeCssMain.getUniqueID(),essential_css:f,critical_css:n,diff_css:p,rest_css:k,group_ids:JSON.stringify(u),_nonce:window.tdb_globals.wpRestNonce},success:function(C,F,G){tdAnalyzeCssMain.setSafeToLeave(!0);g("#wp-admin-bar-td_analyze_css_menu").addClass("tda-has-essential-css")},error:function(C,F,G){}})}}function B(a,c,b,e){var h=a.find(".tda-style:not(.tda-result-line-found,.tda-result-line-diff)");if(h.length)for(var l=
    0;l<h.length;l++){var d=h[l].textContent.split("{");if(2===d.length){var f=d[0].trimChar(" ").replace(/:?:active|:?:visited|:?:hover|:?:focus|:not\(:?:focus\)|:?:valid|:?:before|:?:after/g,"");if(-1===f.indexOf("%")&&0!==f.indexOf("#wpadminbar")&&0!==f.indexOf("#tdw-css-writer")&&0!==f.indexOf("#tdw-css-analyze")&&0!==f.indexOf(".tdw-")&&0!==f.indexOf(".ace_")&&0!==f.indexOf(".ace-")&&0!==f.indexOf("#tdb-modal")&&-1===f.indexOf(":not(")){try{var n=c.find(f)}catch(m){console.log('?? Selector:"'+f+
    '" Original:"'+d[0]+'"');console.log(h[l].textContent);console.log(m);continue}if(n.length){b?h[l].classList.add("tda-result-line-diff"):h[l].classList.add("tda-result-line-found");var p=!1;n.each(function(){1E3>g(this).offset().top&&(h[l].classList.add("tda-result-line-critical"),p=!0)});d=/animation-name\s*:\s*([a-zA-Z0-9\-_]*)/gm;for(var k;null!==(k=d.exec(h[l].textContent));)k.index===d.lastIndex&&d.lastIndex++,1<k.length&&(f=a.find('.tda-style:not(.tda-result-line-found,.tda-result-line-diff):contains("keyframes '+
    k[1]+'")'),f.length&&(b?f.addClass("tda-result-line-diff"):f.addClass("tda-result-line-found"),p&&f.addClass("tda-result-line-critical")));for(d=/font-family:\s*([^;]+)/gm;null!==(k=d.exec(h[l].textContent));)k.index===d.lastIndex&&d.lastIndex++,1<k.length&&(f=a.find('.tda-font-face:not(.tda-result-line-found,.tda-result-line-diff):contains("font-face")'),f.length&&f.each(function(){var m=g(this);0<m.text().indexOf(k[1])&&(b?m.addClass("tda-result-line-diff"):m.addClass("tda-result-line-found"),p&&
m.addClass("tda-result-line-critical"))}))}}}}!0===e&&t()}function w(a){for(var c=[],b=0;b<a.contentWindow.EventListeners.listeners.length;b++){var e=a.contentWindow.EventListeners.listeners[b].target,h=a.contentWindow.EventListeners.listeners[b].type;if(("undefined"===typeof e.id||"wpadminbar"!==e.id&&0!==e.id.indexOf("wp-admin-bar")&&0!==e.id.indexOf("tdw-css-writer"))&&!(g(e).closest("#wpadminbar").length||g(e).closest("#tdw-css-writer").length||g(e).closest("#tdw-css-analyze").length||"undefined"!==
    typeof e.className&&(0===e.className.indexOf("ace_")||0===e.className.indexOf("adminbar-")||0===e.className.indexOf("ab-item")||0===e.className.indexOf("submit")&&0===e.parentElement.parentElement.className.indexOf("comment-form")||-1!==e.className.indexOf("td-login-button"))||0<="submit load unload cut copy paste mouseout touchstart touchmove".split(" ").indexOf(h))){if("undefined"!==typeof e.tagName)if("A"===e.tagName){if(e.hasAttributes()&&"undefined"!==typeof e.attributes.href&&"undefined"!==
    typeof e.attributes.href.value&&"click"===h&&(0!==e.attributes.href.value.indexOf("#")||-1!==e.className.indexOf("td-social-network")))continue}else if(0===e.id.indexOf("commentform")&&"keydown"===h)continue;c.push(a.contentWindow.EventListeners.listeners[b])}}return c}function H(){var a=g(".tda-results");if(""===a.html()){a.html("");var c=g('iframe[id="tda-analyze-css-iframe"]'),b=0;c[0].contentDocument.documentElement.children[0].childNodes.forEach(function(p){if("undefined"!==typeof p.tagName){var k=
    p.id.trim(),m=k;if("td_analyze_css_frontend-css"!==k&&"td_live_css_frontend-css"!==k&&"admin-bar-css"!==k&&"google-fonts-style-css"!==k)switch(p.tagName){case "STYLE":""===k?k=++b:m='data-style-id="'+k+'"';var r="checked";"undefined"!==typeof p.media&&"print"===p.media&&(r="");k=g('<div id="tda-analyze-'+k+'" class="tda-style-group tda-header-style-inline '+("checked"===r?"":"tda-style-group-disabled")+'" '+m+'><input type="checkbox" class="tda-enable-style-group" title="If you disable it, this CSS will be loaded fully" '+
    r+'><div class="tda-result-label">Header Inline Style: '+k+'</div><div class="tda-result-lines"></div></div>');x(c,p.id,p.sheet,k.find(".tda-result-lines"))&&a.append(k);break;case "LINK":if("text/css"===p.type){""===k?k=++b:m='data-style-id="'+k+'"';r="checked";if(0===k.indexOf("dashicons-css")||0===k.indexOf("tdc_admin_bar_menu-css")||0===k.indexOf("tdb_wp_admin-css"))r="";k=g('<div id="tda-analyze-'+k+'" class="tda-style-group tda-header-style-link '+("checked"===r?"":"tda-style-group-disabled")+
    '" '+m+'><input type="checkbox" class="tda-enable-style-group" title="If you disable it, this CSS will be loaded fully" '+r+'><div class="tda-result-label">'+k+'</div><div class="tda-result-lines"></div></div>');x(c,p.id,p.sheet,k.find(".tda-result-lines"))&&a.append(k)}}}});for(var e=c[0].contentDocument.documentElement.children[1].getElementsByTagName("style"),h=0;h<e.length;h++){var l=g('<div class="tda-style-group tda-body-style-inline"><input type="checkbox" class="tda-enable-style-group" title="If you disable it, this CSS will be loaded fully" checked><div class="tda-result-label">Body Inline Style: '+
    (h+1)+'</div><div class="tda-result-lines"></div></div>');x(c,"body",e.item(h).sheet,l.find(".tda-result-lines"))&&a.append(l)}window.liveCheckContent=!1;var d=!0;B(a,c.contents(),!1,!1);d=!1;var f=c.contents().find("html")[0].outerHTML,n=c.width();setInterval(function(p){if(window.liveCheckContent&&!d){d=!0;p="";var k=c.width();p="undefined"!==typeof window.contentList&&window.contentList.length?window.contentList.shift():c.contents().find("html")[0].outerHTML;if(f===p&&n===k)d=!1;else{f=p;n=k;clearTimeout(window.test1);
        window.test1=setTimeout(function(){d=!1},1E4);var m=g('iframe[id="test-tda-analyze-css-iframe"]');m.length||(m=g('<iframe id="test-tda-analyze-css-iframe" style="width:100%;height:'+window.innerHeight+'px;position:absolute;left:0;top:0;z-index:8998;border:0;"></iframe>'),g("body").prepend(m),g("body").prepend('<div style="width: 100%;height: 100%;background-color: rgb(220,220,220);position: fixed;z-index: 8999"></div>'),m.on("load",function(){B(a,m.contents(),!0,!1);d=!1}));m.attr("srcdoc",p);m.width(k)}}},
    500)}}tdAnalyzeCssMain={_isInitialized:!1,_mouseInitialPosition:q,_editorMoving:!1,_editorResizing:!1,_safeToLeave:!1,$_editorWrapper:q,$_editorCover:q,$_window:q,_resizeOffset:q,_fullAnalyzed:!1,init:function(){if(!tdAnalyzeCssMain._isInitialized){var a=new URL(window.location.href);(new URLSearchParams(a.search)).has("tda_action")||(tdAnalyzeCssMain.$_window=g(window),tdAnalyzeCssMain.$_editorWrapper=g("#tdw-css-analyze"),tdAnalyzeCssMain.$_editorCover=g("#tdw-css-analyze-cover"),tdAnalyzeCssMain._isInitialized=
        !0)}},hideEditor:function(){this.$_editorWrapper.removeClass("tdw-visible")},hideCover:function(){this.$_editorCover.hide()},showEditor:function(){this.$_editorWrapper.addClass("tdw-visible");this.$_editorWrapper.css({left:(window.innerWidth-this.$_editorWrapper.outerWidth())/2,top:(window.innerHeight-this.$_editorWrapper.outerHeight())/2})},showCoverLoading:function(){this.$_editorCover.removeClass("tdw-css-analyze-cover-loading")},hideCoverLoading:function(){this.$_editorCover.addClass("tdw-css-analyze-cover-loading")},
    showCover:function(){this.$_editorCover.show()},getEditorPosition:function(){return tdAnalyzeCssMain._editorPosition},setEditorPosition:function(a){tdAnalyzeCssMain._editorPosition=tdAnalyzeCssMain.$_editorWrapper.offset()},setMouseInitialPosition:function(a){tdAnalyzeCssMain._mouseInitialPosition=a},getMouseInitialPosition:function(){return tdAnalyzeCssMain._mouseInitialPosition},setSafeToLeave:function(a){this._safeToLeave=a},isSafeToLeave:function(){return this._safeToLeave},getRestEndPoint:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                c){return D.isEmpty(window.tdaGlobal.permalinkStructure)?window.tdaGlobal.wpRestUrl+a+"&"+c:window.tdaGlobal.wpRestUrl+a+"?"+c},getUniqueID:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}};g().ready(function(){tdAnalyzeCssMain.init();if(tdAnalyzeCssMain._isInitialized)g("body").on("click","#wp-admin-bar-td_analyze_css_menu a",function(a){a.preventDefault();a.stopPropagation()}).on("click","#wp-admin-bar-td_clear_analyze_css a",
    function(a){a.preventDefault();a.stopPropagation();g.ajax({type:"POST",url:tdAnalyzeCssMain.getRestEndPoint("tda/delete_essential_css","uuid="+tdAnalyzeCssMain.getUniqueID()),beforeSend:function(c){c.setRequestHeader("X-WP-Nonce",window.tdaGlobal.wpRestNonce)},data:{post_id:window.tdaGlobal.postId,_nonce:window.tdb_globals.wpRestNonce},success:function(c,b,e){tdAnalyzeCssMain.hideEditor();tdAnalyzeCssMain.hideCover();alert("Css Analyze removed");window.location.reload()},error:function(c,b,e){}})}).on("click",
    "#wp-admin-bar-td_analyze_css a",function(a){a.preventDefault();a.stopPropagation();var c=g(this);tdAnalyzeCssMain.showCover();c.closest("#wp-admin-bar-td_analyze_css_menu").hasClass("tda-has-essential-css")&&!confirm("The Analyzer Css will clear your existing css. Do you want to continue?")?tdAnalyzeCssMain.hideCover():(g("#wp-admin-bar-td_analyze_css_menu-default").parent().hide(),g.ajax({type:"POST",url:tdAnalyzeCssMain.getRestEndPoint("tda/delete_essential_css","uuid="+tdAnalyzeCssMain.getUniqueID()),
        beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",window.tdaGlobal.wpRestNonce)},data:{post_id:window.tdaGlobal.postId,_nonce:window.tdb_globals.wpRestNonce},success:function(b,e,h){b=g(".tda-results");b.length&&b.empty();b=g('iframe[id="tda-analyze-css-iframe"]');e=window.location.href.split("#")[0];e=0>e.indexOf("?")?e+"?tda_iframe=1":e+"&tda_iframe=1";clearInterval(window.testInterval);b.length?b.attr("src",e):(b=g('<iframe id="tda-analyze-css-iframe" style="width:100%;height:'+window.innerHeight+
            'px;position:absolute;left:0;top:0;z-index:9000;border:0"></iframe>'),g("body").children("div").not("#wpadminbar, #tdw-css-analyze, #tdw-css-analyze-cover").remove(),g("body").prepend(b),b.attr("src",e),b.on("load",function(){tdAnalyzeCssMain.showEditor();tdAnalyzeCssMain.showCover();tdAnalyzeCssMain.hideCoverLoading();H();t(!0);c.closest("#wp-admin-bar-td_analyze_css_menu").removeClass("tda-has-essential-css")}))},error:function(b,e,h){}}))}).on("click","#tdw-css-analyze",function(a){}).on("mousedown",
    "#tdw-css-analyze .tdw-resize",function(a){if(a.currentTarget===a.target){var c=g(a.currentTarget);tdAnalyzeCssMain._editorResizing=!0;tdAnalyzeCssMain.setEditorPosition(a);tdAnalyzeCssMain.setMouseInitialPosition({left:a.pageX,top:a.pageY});tdAnalyzeCssMain._resizeOffset={width:c.width(),height:c.height(),offsetLeft:a.pageX-c.offset().left,offsetTop:a.pageY-c.offset().top}}}).on("mouseup","#tdw-css-analyze .tdw-resize",function(a){a.currentTarget===a.target&&(tdAnalyzeCssMain._editorMoving=!1,tdAnalyzeCssMain.setMouseInitialPosition(q),
    tdAnalyzeCssMain._diffGap=q)}).on("mousedown","#tdw-css-analyze > header",function(a){a.currentTarget===a.target&&(tdAnalyzeCssMain._editorMoving=!0,tdAnalyzeCssMain.setEditorPosition(a),tdAnalyzeCssMain.setMouseInitialPosition({left:a.pageX,top:a.pageY}))}).on("mouseup","#tdw-css-analyze > header",function(a){a.currentTarget===a.target&&(tdAnalyzeCssMain._editorMoving=!1,tdAnalyzeCssMain.setEditorPosition(a),tdAnalyzeCssMain.setMouseInitialPosition(q))}).on("mouseup",function(a){tdAnalyzeCssMain._editorMoving=
    !1;tdAnalyzeCssMain._editorResizing=!1;tdAnalyzeCssMain.setEditorPosition(a);tdAnalyzeCssMain._resizeOffset=q;tdAnalyzeCssMain.setMouseInitialPosition({left:a.pageX,top:a.pageY})}).on("mousemove",function(a){if(tdAnalyzeCssMain._editorMoving){a.stopPropagation();a.preventDefault();var c=tdAnalyzeCssMain.getMouseInitialPosition();if("undefined"!==typeof c){var b=tdAnalyzeCssMain.getEditorPosition();tdAnalyzeCssMain.$_editorWrapper.css({left:a.pageX-tdAnalyzeCssMain.$_window.scrollLeft()-(c.left-b.left),
    top:a.pageY-tdAnalyzeCssMain.$_window.scrollTop()-(c.top-b.top)})}}else if(tdAnalyzeCssMain._editorResizing&&(a.stopPropagation(),a.preventDefault(),c=tdAnalyzeCssMain.getMouseInitialPosition(),"undefined"!==typeof c)){var e={offsetLeft:0,offsetTop:0};D.isUndefined(tdAnalyzeCssMain._resizeOffset)||(e=tdAnalyzeCssMain._resizeOffset);b=tdAnalyzeCssMain.getEditorPosition();c=a.pageX-b.left+e.width-e.offsetLeft;a=a.pageY-b.top+e.height-e.offsetTop;tdAnalyzeCssMain.$_editorWrapper.css({width:c,height:a});
    tdAnalyzeCssMain.$_editorWrapper.data("width",c);tdAnalyzeCssMain.$_editorWrapper.data("height",a);tdAnalyzeCssMain._timerResize=setTimeout(function(){"undefined"!==typeof tdAnalyzeCssMain._timerResize&&(clearTimeout(tdAnalyzeCssMain._timerResize),editor.resize(!0))},100)}}).on("click","#tdw-css-analyze .tda-close",function(a){tdAnalyzeCssMain.isSafeToLeave()?window.location.reload():confirm("Are you sure you want to leave? Please make sure you have saved the CSS.")&&window.location.reload()})});
    String.prototype.trimCharLeft=function(a){a===q&&(a="s");return this.replace(new RegExp("^["+a+"]+"),"")};String.prototype.trimCharRight=function(a){a===q&&(a="s");return this.replace(new RegExp("["+a+"]+$"),"")};String.prototype.trimChar=function(a){return this.trimCharLeft(a).trimCharRight(a)};g(window).on("load",function(){if(tdAnalyzeCssMain._isInitialized){g("body").on("click",".tda-save-essential-css",function(){t()}).on("click",".tda-btn-auto",function(){g(this).addClass("tda-btn-disabled");
        var c=tdAnalyzeCssMain.$_editorWrapper.find(".tda-auto-wrap"),b=g('iframe[id="tda-analyze-css-iframe"]');c.css("display","flex");window.eventList=w(b[0]);clearInterval(window.testInterval);window.contentList=[];window.eventIndex=0;window.waitForIframeLoading=!1;var e=0,h=g(".tda-results"),l=[{name:"Desktop - Not Scrolled",type:"desktop",callback:function(f){var n=window.location.href.split("#")[0];n=0>n.indexOf("?")?n+"?tda_iframe=1":n+"&tda_iframe=1";n!==b.attr("src")?(window.waitForIframeLoading=
                !0,b.on("load",function(){f.eventList=w(b[0]);window.waitForIframeLoading=!1;window.top.jQuery(".tda-total-steps").html(f.eventList.length)}),b.attr("src",n)):(n=w(b[0]),f.eventList=n,console.log(f.eventList),console.log(f.eventList.length),window.top.jQuery(".tda-total-steps").html(f.eventList.length));b[0].contentWindow.scrollTo(0,0);tdAnalyzeCssMain.$_editorWrapper.find(".tda-range-window").val(b[0].contentWindow.outerWidth).trigger("change")}},{name:"Desktop - Scrolled",type:"desktop_scroll",
            callback:function(f){f.eventList=w(b[0]);b[0].contentWindow.scrollTo(0,b[0].contentWindow.outerHeight);window.top.jQuery(".tda-total-steps").html(f.eventList.length);setTimeout(function(){b[0].contentWindow.scrollTo(0,b[0].contentWindow.pageYOffset-100)},50)}},{name:"Desktop - Logged Out [Not Scrolled]",type:"desktop_logged_out",callback:function(f){var n=window.location.href.split("#")[0];n=0>n.indexOf("?")?n+"?tda_iframe=1&tda_action=1":n+"&tda_iframe=1&tda_action=1";n!==b.attr("src")?(window.waitForIframeLoading=
                !0,b.on("load",function(){f.eventList=w(b[0]);window.waitForIframeLoading=!1;window.top.jQuery(".tda-total-steps").html(f.eventList.length);b.contents().remove("#tdw-css-analyze")}),b.attr("src",n)):(f.eventList=w(b[0]),window.top.jQuery(".tda-total-steps").html(f.eventList.length));b[0].contentWindow.scrollTo(0,0);g(".tda-range-window").val(b[0].contentWindow.outerWidth).trigger("change")}},{name:"Desktop - Logged Out [Scrolled]",type:"desktop_scroll_logged_out",callback:function(f){f.eventList=
                w(b[0]);b[0].contentWindow.scrollTo(0,b[0].contentWindow.outerHeight);window.top.jQuery(".tda-total-steps").html(f.eventList.length);setTimeout(function(){b[0].contentWindow.scrollTo(0,b[0].contentWindow.pageYOffset-100)},50)}}],d;tdAnalyzeCssMain.$_editorWrapper.find(".tda-current-viewport").empty();l.forEach(function(f){tdAnalyzeCssMain.$_editorWrapper.find(".tda-current-viewport").append('<div class="tda-current-viewport-item" data-type="'+f.type+'">'+f.name+"</div>")});window.testInterval=setInterval(function(){if(!waitForIframeLoading&&
            ("undefined"===typeof d?l.some(function(m){return"undefined"===typeof m.solved?(m.callback(m),m.solved=!1,d=m,g('.tda-current-viewport .tda-current-viewport-item[data-type="'+d.type+'"]').addClass("tda-current-viewport-item-running"),!0):!1}):d.callback(d),"undefined"===typeof d||"undefined"!==typeof d.eventList)){for(var f=eventIndex;f<d.eventList.length;){var n=d.eventList[f].target;f=d.eventList[f].type;if("keydown"===f){var p=new KeyboardEvent(f,{key:"e",keyCode:69,code:"KeyE",which:69,view:b[0].contentWindow,
            bubbles:!0,cancelable:!0});n.dispatchEvent(p);"undefined"===typeof n.className||-1===n.className.indexOf("tdb-head-search-form-input")&&-1===n.id.indexOf("td-header-search-mob")||g(n).val("e")}else if("focus"===f)"#document"!==n.nodeName&&n.focus();else{p=new MouseEvent(f,{view:b[0].contentWindow,bubbles:!0,cancelable:!0,composed:!0});if("click"===f&&"undefined"!==typeof n.className&&-1!==n.className.indexOf("td_mobile_submenu")){var k=n.getElementsByTagName("i");k.length&&(n=k[0])}n.dispatchEvent(p)}window.eventIndex++;
            console.log(++e);console.log(n);console.log(f);tdAnalyzeCssMain.$_editorWrapper.find(".tda-auto-progress-info").css("visibility","visible");tdAnalyzeCssMain.$_editorWrapper.find(".tda-current-step").html(eventIndex);tdAnalyzeCssMain.$_editorWrapper.find(".tda-auto-progress-bar-fill").css("width",100*eventIndex/d.eventList.length+"%");eventIndex===d.eventList.length&&g('.tda-current-viewport .tda-current-viewport-item[data-type="'+d.type+'"]').removeClass("tda-current-viewport-item-running").addClass("tda-current-viewport-item-done");
            setTimeout(function(){var m=g('iframe[id="tda-analyze-css-iframe"]');B(h,m.contents(),!0,!1)},300);return}l.some(function(m){return"undefined"!==typeof m.solved&&!1===m.solved?(m.solved=!0,d=q,!0):!1});l.some(function(m){return"undefined"===typeof m.solved?!0:!1})?window.eventIndex=0:(clearInterval(window.testInterval),tdAnalyzeCssMain._fullAnalyzed=!0,B(h,b.contents(),!0,!0),tdAnalyzeCssMain.$_editorWrapper.find(".tda-auto-wrap").hide(),tdAnalyzeCssMain.$_editorWrapper.find(".tda-btn-auto").hide(),
            tdAnalyzeCssMain.$_editorWrapper.find(".tda-btn-manual").css("display","flex"),tdAnalyzeCssMain.$_editorWrapper.find(".tda-filter-viewports").show(),tdAnalyzeCssMain.$_editorWrapper.find(".tda-filter-diff").show())}},1E3)}).on("click",".tda-btn-manual",function(){var c=g(this);c.toggleClass("tda-btn-manual-active");tdAnalyzeCssMain.$_editorWrapper.find(".tda-btn-auto").toggleClass("tda-btn-disabled");window.liveCheckContent=c.hasClass("tda-btn-manual-active");c.hasClass("tda-btn-manual-active")?tdAnalyzeCssMain.hideCover():
        tdAnalyzeCssMain.showCover()}).on("change",".tda-only-selected",function(){var c=g(this);c.next("label").addClass("tda-filter-running");setTimeout(function(){g(".tda-only-diff").is(":checked")&&(g(".tda-only-diff").prop("checked",!1),tdAnalyzeCssMain.$_editorWrapper.find(".tda-style:not(.tda-result-line-diff), .tda-font-face:not(.tda-result-line-diff)").parent().show(),tdAnalyzeCssMain.$_editorWrapper.find(".tda-analyze-frame-rule").show());tdAnalyzeCssMain.$_editorWrapper.find(".tda-style:not(.tda-result-line-diff), .tda-font-face:not(.tda-result-line-diff)").parent().show();
        tdAnalyzeCssMain.$_editorWrapper.find(".tda-analyze-frame-rule").show();c.is(":checked")?(tdAnalyzeCssMain.$_editorWrapper.find(".tda-style:not(.tda-result-line-found), .tda-font-face:not(.tda-result-line-found)").parent().hide(),tdAnalyzeCssMain.$_editorWrapper.find(".tda-analyze-frame-rule").hide(),tdAnalyzeCssMain.$_editorWrapper.find(".tda-info-result-line-found").each(function(b,e){var h=g(e),l=h.data("value");0===parseInt(l,10)&&h.closest(".tda-style-group").hide()})):(tdAnalyzeCssMain.$_editorWrapper.find(".tda-style:not(.tda-result-line-found), .tda-font-face:not(.tda-result-line-found)").parent().show(),
            tdAnalyzeCssMain.$_editorWrapper.find(".tda-analyze-frame-rule").show(),tdAnalyzeCssMain.$_editorWrapper.find(".tda-style-group").show());c.next("label").removeClass("tda-filter-running")},100)}).on("change",".tda-only-diff",function(){var c=g(this);c.next("label").addClass("tda-filter-running");setTimeout(function(){g(".tda-only-selected").is(":checked")&&(g(".tda-only-selected").prop("checked",!1),tdAnalyzeCssMain.$_editorWrapper.find(".tda-style:not(.tda-result-line-found), .tda-font-face:not(.tda-result-line-found)").parent().show(),
        tdAnalyzeCssMain.$_editorWrapper.find(".tda-analyze-frame-rule").show(),tdAnalyzeCssMain.$_editorWrapper.find(".tda-style-group").show());c.is(":checked")?(tdAnalyzeCssMain.$_editorWrapper.find(".tda-style:not(.tda-result-line-diff), .tda-font-face:not(.tda-result-line-diff)").parent().hide(),tdAnalyzeCssMain.$_editorWrapper.find(".tda-analyze-frame-rule").hide()):(tdAnalyzeCssMain.$_editorWrapper.find(".tda-style:not(.tda-result-line-diff), .tda-font-face:not(.tda-result-line-diff)").parent().show(),
        tdAnalyzeCssMain.$_editorWrapper.find(".tda-analyze-frame-rule").show());c.next("label").removeClass("tda-filter-running")},100)}).on("click",".tda-user-check-label-yes",function(c){c.preventDefault();c.stopPropagation();c=g(this);c.parent().siblings(".tda-style, .tda-font-face").removeClass("tda-result-line-selected-no tda-result-line-selected-none").addClass("tda-result-line-selected-yes");z(c.closest(".tda-style-group"));t(!0)}).on("click",".tda-user-check-label-no",function(c){c.preventDefault();
        c.stopPropagation();c=g(this);c.parent().siblings(".tda-style, .tda-font-face").removeClass("tda-result-line-selected-yes tda-result-line-selected-none").addClass("tda-result-line-selected-no");z(c.closest(".tda-style-group"));t(!0)}).on("click",".tda-user-check-label-none",function(c){c.preventDefault();c.stopPropagation();c=g(this);c.parent().siblings(".tda-style, .tda-font-face").removeClass("tda-result-line-selected-yes tda-result-line-selected-no").addClass("tda-result-line-selected-none");z(c.closest(".tda-style-group"));
        t(!0)}).on("change",".tda-range-window",function(){g('iframe[id="tda-analyze-css-iframe"]').width(g(this).val())}).on("mouseenter",".tda-style, .tda-font-face",function(){"undefined"!==typeof window.test&&clearTimeout(window.test);var c=g(this);c.after(a);c.hasClass("tda-result-line-selected-yes")?a.find('input[name="tda-user-check"][value="yes"]').prop("checked",!0):c.hasClass("tda-result-line-selected-no")?a.find('input[name="tda-user-check"][value="no"]').prop("checked",!0):a.find('input[name="tda-user-check"][value="none"]').prop("checked",
        !0)}).on("mouseleave",".tda-style, .tda-font-face",function(c){"undefined"!==typeof window.test&&clearTimeout(window.test);window.test=setTimeout(function(){a.remove()},50)}).on("mouseenter",".tda-style-form",function(){clearTimeout(window.test)}).on("mouseleave",".tda-style-form",function(c){window.test=setTimeout(function(){a.remove()},50)}).on("click",".tda-result-label",function(c){c=g(c.target);c.hasClass("tda-enable-style-group")?(c.closest(".tda-style-group").toggleClass("tda-style-group-disabled"),
        t(!0)):g(this).closest(".tda-style-group").toggleClass("tda-result-expanded")}).on("click",".tda-enable-style-group",function(c){g(this).closest(".tda-style-group").toggleClass("tda-style-group-disabled");t(!0)}).on("click",".tda-btn-auto-cancel",function(){confirm("Are you sure? The automate test didn't finish its job!")&&(clearInterval(window.testInterval),g(".tda-auto-wrap").hide(),g(".tda-btn-auto").removeClass("tda-btn-disabled"))});g(".tda-range-window").attr("max",window.innerWidth).attr("value",
        window.innerWidth);var a=g('<form class="tda-style-form"><label for="tda-user-check-yes" class="tda-user-check-label-yes" title="Include"><input type="radio" name="tda-user-check" class="tda-user-check-yes" value="yes"><span class="tda-user-check-icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 768 768"><path d="M617.376 169.376l-329.376 329.376-137.376-137.376c-12.512-12.512-32.768-12.512-45.248 0s-12.512 32.768 0 45.248l160 160c12.512 12.512 32.768 12.512 45.248 0l352-352c12.512-12.512 12.512-32.768 0-45.248s-32.768-12.512-45.248 0z"></path></svg></span></label><label for="tda-user-check-no" class="tda-user-check-label-no" title="Exclude"><input type="radio" name="tda-user-check" class="tda-user-check-no" value="no"><span class="tda-user-check-icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 768 768"><path d="M169.376 214.624l169.376 169.376-169.376 169.376c-12.512 12.512-12.512 32.768 0 45.248s32.768 12.512 45.248 0l169.376-169.376 169.376 169.376c12.512 12.512 32.768 12.512 45.248 0s12.512-32.768 0-45.248l-169.376-169.376 169.376-169.376c12.512-12.512 12.512-32.768 0-45.248s-32.768-12.512-45.248 0l-169.376 169.376-169.376-169.376c-12.512-12.512-32.768-12.512-45.248 0s-12.512 32.768 0 45.248z"></path></svg></span></label><label for="tda-user-check-none" class="tda-user-check-label-none" title="Automatic"><input type="radio" name="tda-user-check" class="tda-user-check-none" value="none" checked><span class="tda-user-check-icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 768 768"><path d="M685.856 277.312c-29.472-83.296-89.984-146.784-163.84-182.048s-161.28-42.336-244.576-12.864c-47.104 16.672-88.064 43.328-119.808 75.648l-93.632 88v-118.048c0-17.664-14.336-32-32-32s-32 14.336-32 32v191.936c0 0.48 0 0.96 0.032 1.408 0.16 3.68 0.928 7.2 2.208 10.432 1.28 3.264 3.136 6.336 5.536 9.12 0.384 0.416 0.768 0.864 1.152 1.248 2.912 3.040 6.432 5.504 10.368 7.2 3.808 1.632 7.968 2.56 12.352 2.624 0.128 0 0.224 0 0.352 0h192c17.664 0 32-14.336 32-32s-14.336-31.968-32-31.968h-111.232l90.56-85.088c24.864-25.344 57.504-46.72 95.456-60.16 66.656-23.584 136.48-17.952 195.648 10.304s107.488 78.976 131.072 145.632c5.888 16.672 24.192 25.376 40.832 19.488s25.376-24.192 19.488-40.832zM655.2 480l-89.6 84.192c-50.688 50.72-116.16 75.712-181.728 75.712s-131.040-24.96-181.024-74.944c-28.48-28.48-48.736-61.792-60.256-95.392-5.76-16.704-23.936-25.6-40.672-19.872s-25.6 23.936-19.872 40.672c14.72 42.848 40.224 84.544 75.552 119.84 62.496 62.464 144.448 93.696 226.304 93.664s163.776-31.296 225.536-93.088l94.56-88.8v118.016c0 17.664 14.336 32 32 32s32-14.336 32-32v-191.936c0-0.48 0-0.96-0.032-1.408-0.16-3.68-0.928-7.2-2.208-10.432-1.28-3.264-3.136-6.336-5.536-9.12-0.384-0.416-0.768-0.864-1.152-1.248-2.912-3.040-6.432-5.504-10.368-7.2-3.808-1.632-7.968-2.56-12.352-2.624-0.128 0-0.224 0-0.352 0h-192c-17.664 0-32 14.336-32 32s14.336 32 32 32z"></path></svg></span></label></form>')}})})(jQuery,
    _);